datadrift_table: datadrift_db  # PostgreSQL 테이블명 (데이터 드리프트 저장용)
datasets:
  base_path: ../datasets  # 학습 데이터셋 저장 경로
  objdet_save_data: false  # 객체 감지 시 원본 데이터 저장 여부 (true: 모든 프레임 저장, false: VLM 검증된 것만)
  use_last_merged_data_4train: false  # 재학습 시 이전 병합 데이터 재사용 여부
server:
  ip: 0.0.0.0  # FastAPI 서버 바인딩 IP (0.0.0.0: 모든 인터페이스, 127.0.0.1: localhost만)
  port: 18880  # FastAPI 서버 포트
postgres:
  host: 127.0.0.1  # PostgreSQL 서버 호스트
  port: 5432  # PostgreSQL 서버 포트
  dbname: postgres  # 데이터베이스명
  user: postgres  # PostgreSQL 사용자명
  password: postgres  # PostgreSQL 비밀번호
video:
  source: D:/videos/105 Incredible Moments Caught on CCTV Camera.mp4  # 비디오 소스 경로 또는 RTSP URL
  camera_id: '007'  # 카메라 식별자 (DB 저장 시 사용)
yolo_model:
  model_name: .\model\yolov8nGender_20251111_v1.pt  # 현재 사용 중인 YOLO 모델 경로 (재학습 시 자동 업데이트됨)
  conf_thresh: 0.5  # 객체 검출 confidence 임계값 (0.0~1.0, 낮을수록 더 많이 검출하지만 오탐 증가)
  allow_classes: all  # 검출 허용 클래스 (all: 모든 클래스, 또는 ['person', 'car'] 등 리스트)
  criteria_classes: person  # 드리프트 감지 대상 클래스 (cron_config.yaml의 class_name과 일치해야 함)
  last_model_update: '2025-11-11T04:53:25.845919'  # 마지막 모델 업데이트 시각 (자동 갱신됨, cooldown 계산에 사용)
model_update:
  overall_map_threshold: 0.0  # 전체 mAP 임계값 (새 모델이 이 값 이상이면 배포 가능)
  criteria_class_map_threshold: 0.01  # criteria_classes의 mAP 임계값 (새 모델이 기존 대비 이 값 이상 향상되어야 배포)
  auto_update: true  # 재학습 후 자동 모델 업데이트 여부 (true: 자동 배포, false: 수동 확인 필요)
  backup_old_model: false  # 모델 업데이트 시 기존 모델 백업 여부
  config_check_interval: 10.0  # config.yaml 변경사항 체크 주기 (초 단위, 실시간 반영용)
drift_detection:
  drift_check_period: 1 days  # 드리프트 체크 시 분석할 데이터 기간 (PostgreSQL interval 형식)
  cooldown_after_update: 30 minutes  # 모델 업데이트 후 드리프트 체크 쿨다운 기간 (새 모델 안정화 대기 시간)
  partition_create_hour: 23  # 일별 파티션 생성 시각 (시)
  partition_create_minute: 0  # 일별 파티션 생성 시각 (분)
preview:
  roi_jpeg_quality: 80  # 미리보기 이미지 JPEG 품질 (0~100, 높을수록 용량 증가)
  show_preview: 0  # 실시간 미리보기 창 표시 여부 (0: 끄기, 1: 켜기)
clip_model:
  model_name_low: ViT-B/32  # 빠른 VLM 모델 (낮은 정확도, 빠른 속도)
  model_name_high: ViT-L/14  # 정확한 VLM 모델 (높은 정확도, 느린 속도)
vlm_intervals:
  interval_sec: 10  # VLM 검증 실행 주기 (초 단위, 너무 짧으면 GPU 부하 증가)
  window_sec: 30  # VLM 검증 대상 시간 윈도우 (이 기간 내 객체들을 묶어서 검증)
